<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.20" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.140" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><meta property="og:url" content="https://xiaokcoding.top/Liunx/wkn71crp/"><meta property="og:site_name" content="XiaokCoding"><meta property="og:title" content="Linux系统编程入门"><meta property="og:description" content="GCC （1）GCC工作流程 （2）GCC常用参数选项 （3）gcc与g++区别 gcc 和 g++ 都是GNU(组织)的一个编译器 误区一：gcc 只能编译 c 代码，g++ 只能编译 c++ 代码 后缀为 .c 的，gcc 把它当作是 C 程序，而 g++ 当作是 c++ 程序 后缀为 .cpp 的，两者都会认为是 C++ 程序，C++ 的语法规则..."><meta property="og:type" content="article"><meta property="og:image" content="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331094210054.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-04-14T05:39:21.000Z"><meta property="article:modified_time" content="2025-04-14T05:39:21.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Linux系统编程入门","image":["https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331094210054.png","https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331094317541.png","https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331104041027.png","https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331110724538.png","https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331151700138.png","https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331152114802.png","https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250403100536755.png","https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250403102024401.png","https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250403102055887.png","https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250403102545619.png","https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250403103046837.png","https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250405151951669.png"],"dateModified":"2025-04-14T05:39:21.000Z","author":[]}</script><link rel="icon" type="image/png" href="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250405201125129.jpg"><title>Linux系统编程入门 | XiaokCoding</title><meta name="description" content="GCC （1）GCC工作流程 （2）GCC常用参数选项 （3）gcc与g++区别 gcc 和 g++ 都是GNU(组织)的一个编译器 误区一：gcc 只能编译 c 代码，g++ 只能编译 c++ 代码 后缀为 .c 的，gcc 把它当作是 C 程序，而 g++ 当作是 c++ 程序 后缀为 .cpp 的，两者都会认为是 C++ 程序，C++ 的语法规则..."><link rel="preload" href="/assets/style-C5aR-zgy.css" as="style"><link rel="stylesheet" href="/assets/style-C5aR-zgy.css"><link rel="modulepreload" href="/assets/app-gdwmcdjK.js"><link rel="modulepreload" href="/assets/index.html-Bkxgvb_h.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-5361e2b5><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-b49b4bd0></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-b49b4bd0> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-5361e2b5 data-v-dc267fb2><div class="vp-navbar" vp-navbar data-v-dc267fb2 data-v-aeb13690><div class="wrapper" data-v-aeb13690><div class="container" data-v-aeb13690><div class="title" data-v-aeb13690><div class="vp-navbar-title has-sidebar" data-v-aeb13690 data-v-6fc7a56b><a class="vp-link no-icon link title" href="/" data-v-6fc7a56b data-v-37973cd5><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="https://theme-plume.vuejs.press/plume.png" alt data-v-b5fe29c2><!--]--><!--[--><img class="vp-image light logo" style="" src="https://theme-plume.vuejs.press/plume.png" alt data-v-b5fe29c2><!--]--><!--]--><!--]--><span data-v-6fc7a56b>XiaokCoding</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-aeb13690><div class="content-body" data-v-aeb13690><!--[--><!--]--><div class="vp-navbar-search search" data-v-aeb13690><div class="search-wrapper" data-v-9e3f40e9><!----><div id="local-search" data-v-9e3f40e9><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-9e3f40e9><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-aeb13690 data-v-10fc8c24><span id="main-nav-aria-label" class="visually-hidden" data-v-10fc8c24>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/" tabindex="0" data-v-10fc8c24 data-v-34c3548d data-v-37973cd5><!--[--><!----><span data-v-34c3548d>🏠首页</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/blog/" tabindex="0" data-v-10fc8c24 data-v-34c3548d data-v-37973cd5><!--[--><!----><span data-v-34c3548d>📑博客</span><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-10fc8c24 data-v-3848bf03><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-3848bf03><span class="text" data-v-3848bf03><!----><!----><span data-v-3848bf03>🗂️系列文章</span><span class="vpi-chevron-down text-icon" data-v-3848bf03></span></span></button><div class="menu" data-v-3848bf03><div class="vp-menu" data-v-3848bf03 data-v-ab092840><div class="items" data-v-ab092840><!--[--><!--[--><div class="vp-menu-link" data-v-ab092840 data-v-3a8eb909><a class="vp-link no-icon link" href="/Cpp/" data-v-3a8eb909 data-v-37973cd5><!--[--><span class="vp-icon vpi-inwwoqdv bg" style="" data-v-3a8eb909 data-v-61dcfb93></span> Cpp<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-ab092840 data-v-3a8eb909><a class="vp-link no-icon link" href="/algorithms/" data-v-3a8eb909 data-v-37973cd5><!--[--><span class="vp-icon vpi-i0gmvxff" style="" data-v-3a8eb909 data-v-61dcfb93></span> algorithms<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-ab092840 data-v-3a8eb909><a class="vp-link no-icon link" href="/Liunx/" data-v-3a8eb909 data-v-37973cd5><!--[--><span class="vp-icon vpi-56wa48lm bg" style="" data-v-3a8eb909 data-v-61dcfb93></span> Linux<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-ab092840 data-v-3a8eb909><a class="vp-link no-icon link" href="/network/" data-v-3a8eb909 data-v-37973cd5><!--[--><span class="vp-icon vpi-1op8tw5a bg" style="" data-v-3a8eb909 data-v-61dcfb93></span> network<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-10fc8c24 data-v-3848bf03><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-3848bf03><span class="text" data-v-3848bf03><span class="vp-icon vpi-4v9oex5h" style="" data-v-3848bf03 data-v-61dcfb93></span><!----><span data-v-3848bf03>更多</span><span class="vpi-chevron-down text-icon" data-v-3848bf03></span></span></button><div class="menu" data-v-3848bf03><div class="vp-menu" data-v-3848bf03 data-v-ab092840><div class="items" data-v-ab092840><!--[--><!--[--><div class="vp-menu-link" data-v-ab092840 data-v-3a8eb909><a class="vp-link no-icon link" href="/sites-collect/" data-v-3a8eb909 data-v-37973cd5><!--[--><span class="vp-icon vpi-df0gpn29" style="" data-v-3a8eb909 data-v-61dcfb93></span> 站点导航<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="vp-navbar-appearance appearance" data-v-aeb13690 data-v-b57a98db><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-b57a98db data-v-f99a722d data-v-c7ab3e8b><span class="check" data-v-c7ab3e8b><span class="icon" data-v-c7ab3e8b><!--[--><span class="vpi-sun sun" data-v-f99a722d></span><span class="vpi-moon moon" data-v-f99a722d></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-aeb13690 data-v-5287d6ab data-v-7e20aa09><!--[--><a class="vp-social-link no-icon" href="https://github.com/xiaokcoding" aria-label="github" target="_blank" rel="noopener" data-v-7e20aa09 data-v-2c28232e><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-aeb13690 data-v-31a66f4b data-v-3848bf03><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-3848bf03><span class="vpi-more-horizontal icon" data-v-3848bf03></span></button><div class="menu" data-v-3848bf03><div class="vp-menu" data-v-3848bf03 data-v-ab092840><!----><!--[--><!--[--><!----><div class="group" data-v-31a66f4b><div class="item appearance" data-v-31a66f4b><p class="label" data-v-31a66f4b>外观</p><div class="appearance-action" data-v-31a66f4b><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-31a66f4b data-v-f99a722d data-v-c7ab3e8b><span class="check" data-v-c7ab3e8b><span class="icon" data-v-c7ab3e8b><!--[--><span class="vpi-sun sun" data-v-f99a722d></span><span class="vpi-moon moon" data-v-f99a722d></span><!--]--></span></span></button></div></div></div><div class="group" data-v-31a66f4b><div class="item social-links" data-v-31a66f4b><div class="vp-social-links social-links-list" data-v-31a66f4b data-v-7e20aa09><!--[--><a class="vp-social-link no-icon" href="https://github.com/xiaokcoding" aria-label="github" target="_blank" rel="noopener" data-v-7e20aa09 data-v-2c28232e><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-aeb13690 data-v-8dd1a604><span class="container" data-v-8dd1a604><span class="top" data-v-8dd1a604></span><span class="middle" data-v-8dd1a604></span><span class="bottom" data-v-8dd1a604></span></span></button></div></div></div></div><div class="divider" data-v-aeb13690><div class="divider-line" data-v-aeb13690></div></div></div><!----></header><div class="vp-local-nav reached-top" data-v-5361e2b5 data-v-7044930a><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-7044930a><span class="vpi-align-left menu-icon" data-v-7044930a></span><span class="menu-text" data-v-7044930a>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-7044930a data-v-e8e0a621><button data-v-e8e0a621>返回顶部</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-5361e2b5 data-v-94d5379a><div class="curtain" data-v-94d5379a></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-94d5379a><span id="sidebar-aria-label" class="visually-hidden" data-v-94d5379a> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-cbd00802><section class="vp-sidebar-item sidebar-item level-0 has-active" data-v-cbd00802 data-v-019d3eec><!----><div data-v-019d3eec data-v-019d3eec><div class="items" data-v-019d3eec><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-019d3eec data-v-019d3eec><div class="item" data-v-019d3eec><div class="indicator" data-v-019d3eec></div><!----><a class="vp-link no-icon link link" href="/Liunx/un3ef18p/" data-v-019d3eec data-v-37973cd5><!--[--><p class="text" data-v-019d3eec>Liunx基础命令</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-019d3eec data-v-019d3eec><div class="item" data-v-019d3eec><div class="indicator" data-v-019d3eec></div><!----><a class="vp-link no-icon link link" href="/Liunx/wkn71crp/" data-v-019d3eec data-v-37973cd5><!--[--><p class="text" data-v-019d3eec>Linux系统编程入门</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-019d3eec data-v-019d3eec><div class="item" data-v-019d3eec><div class="indicator" data-v-019d3eec></div><!----><a class="vp-link no-icon link link" href="/Liunx/d4q4z9fd/" data-v-019d3eec data-v-37973cd5><!--[--><p class="text" data-v-019d3eec>Linux多进程开发</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-019d3eec data-v-019d3eec><div class="item" data-v-019d3eec><div class="indicator" data-v-019d3eec></div><!----><a class="vp-link no-icon link link" href="/Liunx/zi07x4jk/" data-v-019d3eec data-v-37973cd5><!--[--><p class="text" data-v-019d3eec>Linux多线程开发</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-019d3eec data-v-019d3eec><div class="item" data-v-019d3eec><div class="indicator" data-v-019d3eec></div><!----><a class="vp-link no-icon link link" href="/Liunx/3u3k5hql/" data-v-019d3eec data-v-37973cd5><!--[--><p class="text" data-v-019d3eec>Linux网络编程</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-019d3eec data-v-019d3eec><div class="item" data-v-019d3eec><div class="indicator" data-v-019d3eec></div><!----><a class="vp-link no-icon link link" href="/Liunx/jeh3d49j/" data-v-019d3eec data-v-37973cd5><!--[--><p class="text" data-v-019d3eec>项目实战与总结</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-5361e2b5 data-v-34da7f8d><div class="vp-doc-container has-sidebar has-aside" data-v-34da7f8d data-v-c519daa1><!--[--><!--]--><div class="container" data-v-c519daa1><div class="aside" vp-outline data-v-c519daa1><div class="aside-curtain" data-v-c519daa1></div><div class="aside-container" data-v-c519daa1><div class="aside-content" data-v-c519daa1><div class="vp-doc-aside" data-v-c519daa1 data-v-642177a3><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-642177a3 data-v-acbbcd0f><div class="content" data-v-acbbcd0f><div class="outline-marker" data-v-acbbcd0f></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-acbbcd0f><span data-v-acbbcd0f>此页内容</span><span class="vpi-print icon" data-v-acbbcd0f></span></div><ul class="root" data-v-acbbcd0f data-v-e2be01f5><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-642177a3></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-c519daa1><div class="content-container" data-v-c519daa1><!--[--><!--]--><main class="main" data-v-c519daa1><nav class="vp-breadcrumb" data-v-c519daa1 data-v-22f700f0><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-22f700f0><!--[--><li property="itemListElement" typeof="ListItem" data-v-22f700f0><a class="vp-link no-icon link breadcrumb" href="/" property="item" typeof="WebPage" data-v-22f700f0 data-v-37973cd5><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-22f700f0></span><meta property="name" content="首页" data-v-22f700f0><meta property="position" content="1" data-v-22f700f0></li><li property="itemListElement" typeof="ListItem" data-v-22f700f0><a class="vp-link no-icon link breadcrumb current" href="/Liunx/wkn71crp/" property="item" typeof="WebPage" data-v-22f700f0 data-v-37973cd5><!--[-->Linux系统编程入门<!--]--><!----></a><!----><meta property="name" content="Linux系统编程入门" data-v-22f700f0><meta property="position" content="2" data-v-22f700f0></li><!--]--></ol></nav><!--[--><h1 class="vp-doc-title page-title" data-v-61a3b974>Linux系统编程入门 <!----></h1><div class="vp-doc-meta" data-v-61a3b974><p class="reading-time" data-v-61a3b974><span class="vpi-books icon" data-v-61a3b974></span><span data-v-61a3b974>约 4187 字</span><span data-v-61a3b974>大约 14 分钟</span></p><!----><p class="create-time" data-v-61a3b974><span class="vpi-clock icon" data-v-61a3b974></span><span data-v-61a3b974>2025-03-26</span></p></div><!--]--><div class="_Liunx_wkn71crp_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-c519daa1><div data-v-c519daa1><h2 id="gcc" tabindex="-1"><a class="header-anchor" href="#gcc"><span>GCC</span></a></h2><h3 id="_1-gcc工作流程" tabindex="-1"><a class="header-anchor" href="#_1-gcc工作流程"><span>（1）GCC工作流程</span></a></h3><figure><img src="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331094210054.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_2-gcc常用参数选项" tabindex="-1"><a class="header-anchor" href="#_2-gcc常用参数选项"><span>（2）GCC常用参数选项</span></a></h3><figure><img src="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331094317541.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gcc</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -E</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello.c</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello.i</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gcc</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -S</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello.i</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello.s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gcc</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello.s</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello.o</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gcc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello.o</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">阶段</th><th style="text-align:left;">输入文件</th><th style="text-align:left;">输出文件</th><th style="text-align:left;">主要任务</th></tr></thead><tbody><tr><td style="text-align:left;">预处理</td><td style="text-align:left;"><code>hello.c</code></td><td style="text-align:left;"><code>hello.i</code></td><td style="text-align:left;">处理宏、头文件、条件编译，生成展开后的源代码。</td></tr><tr><td style="text-align:left;">编译</td><td style="text-align:left;"><code>hello.i</code></td><td style="text-align:left;"><code>hello.s</code></td><td style="text-align:left;">将C代码转换为汇编代码，进行语法和语义分析，优化代码。</td></tr><tr><td style="text-align:left;">汇编</td><td style="text-align:left;"><code>hello.s</code></td><td style="text-align:left;"><code>hello.o</code></td><td style="text-align:left;">将汇编代码转换为机器代码，生成目标文件。</td></tr><tr><td style="text-align:left;">链接</td><td style="text-align:left;"><code>hello.o</code></td><td style="text-align:left;"><code>hello</code></td><td style="text-align:left;">将目标文件与库文件合并，解析符号，生成可执行文件。</td></tr><tr><td style="text-align:left;">运行</td><td style="text-align:left;"><code>hello</code></td><td style="text-align:left;">无</td><td style="text-align:left;">操作系统加载可执行文件并执行其中的机器指令。</td></tr></tbody></table><h3 id="_3-gcc与g-区别" tabindex="-1"><a class="header-anchor" href="#_3-gcc与g-区别"><span>（3）gcc与g++区别</span></a></h3><ul><li><code>gcc</code> 和 <code>g++</code> 都是<code>GNU(组织)</code>的一个编译器</li><li><strong>误区一</strong>：<code>gcc</code> 只能编译 <code>c</code> 代码，<code>g++</code> 只能编译 <code>c++</code> 代码 <ul><li>后缀为<code> .c</code> 的，<code>gcc</code> 把它当作是 <code>C</code> 程序，而 <code>g++</code> 当作是 <code>c++</code> 程序</li><li>后缀为 <code>.cpp</code> 的，两者都会认为是 <code>C++</code> 程序，<code>C++</code> 的语法规则更加严谨一些</li><li>编译阶段，<code>g++</code> 会调用 <code>gcc</code>，对于 <code>C++</code> 代码，两者是等价的，但是因为 <code>gcc</code> 命令不能自动和 <code>C++</code> 程序使用的库联接，所以通常用 <code>g++</code> 来完成链接，为了统一起见，干脆编译/链接统统用 <code>g++</code> 了，这就给人一种错觉，好像 <code>cpp</code> 程序只能用 <code>g++</code> 似的</li></ul></li><li><strong>误区二</strong>：<code>gcc</code> 不会定义 <code>__cplusplus</code> 宏，而 <code>g++</code> 会 <ul><li>实际上，这个宏只是标志着编译器将会把代码按 <code>C</code> 还是 <code>C++</code> 语法来解释</li><li>如上所述，如果后缀为<code> .c</code>，并且采用 <code>gcc</code> 编译器，则该宏就是未定义的，否则，就是已定义</li></ul></li><li><strong>误区三</strong>：编译只能用 <code>gcc</code>，链接只能用 <code>g++</code><ul><li>严格来说，这句话不算错误，但是它混淆了概念，应该这样说：编译可以用 <code>gcc/g++</code>，而链接可以用 <code>g++</code> 或者 <code>gcc -lstdc++</code></li><li><code>gcc</code> 命令不能自动和C++程序使用的库联接，所以通常使用 <code>g++</code> 来完成链接。但在编译阶段，<code>g++</code> 会自动调用 <code>gcc</code>，二者等价</li></ul></li></ul><h2 id="静态库和动态库" tabindex="-1"><a class="header-anchor" href="#静态库和动态库"><span>静态库和动态库</span></a></h2><h3 id="_1-什么是库" tabindex="-1"><a class="header-anchor" href="#_1-什么是库"><span>（1）什么是库</span></a></h3><ul><li>库文件是计算机上的一类文件，可以简单的把库文件看成一种代码仓库，它提供给使用者一些可以直接拿来用的变量、函数或类</li><li>库是特殊的一种程序，编写库的程序和编写一般的程序区别不大，只是库不能单独运行</li><li>库文件有两种，静态库和动态库（共享库）。区别是： <ul><li><strong>静态库</strong>在程序的链接阶段被复制到了程序中</li><li><strong>动态库</strong>在链接阶段没有被复制到程序中，而是程序在运行时由系统动态加载到内存中供程序调用</li></ul></li><li>库的好处：代码保密和方便部署和分发</li></ul><h3 id="_2-静态库的制作" tabindex="-1"><a class="header-anchor" href="#_2-静态库的制作"><span>（2）静态库的制作</span></a></h3><figure><img src="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331104041027.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> calc</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> div.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> head.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mult.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> └──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sub.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">└──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> library</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> include</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    │  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> └──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> head.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    └──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> src</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> div.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mult.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        └──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sub.c</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gcc</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add.c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> div.c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mult.c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sub.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ar</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rcs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> libcalc.a</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.o</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./calc/libcalc.a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./library/lib</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gcc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main.c</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -I</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./include</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -L</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./lib</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -l</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> calc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-动态库的制作" tabindex="-1"><a class="header-anchor" href="#_3-动态库的制作"><span>（3）动态库的制作</span></a></h3><figure><img src="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331110724538.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> calc</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> div.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> head.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mult.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">│  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> └──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sub.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">└──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> library</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> include</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    │  </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> └──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> head.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    └──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> src</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> div.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mult.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        └──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sub.c</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gcc</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -fpic</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add.c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> div.c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mult.c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sub.c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gcc</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -shared</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.o</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> libcalc.so</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ../calc/libcalc.so</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./lib/</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gcc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main.c</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -I</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./include</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -L</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./lib</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -l</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> calc</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./main</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./main:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> error</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> while</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> shared</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> libraries:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> libcalc.so:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cannot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> open</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> shared</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> object</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> No</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> such</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> or</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> directory</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ldd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./main</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">linux-vdso.so.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0x00007fff47da2000)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">libcalc.so</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> found</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">libc.so.6</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /lib/x86_64-linux-gnu/libc.so.6</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0x000075f138e00000)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/lib64/ld-linux-x86-64.so.2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0x000075f1390b5000)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>如何定位共享库文件呢？</strong></p><p>当系统加载可执行代码时候，能够知道其所依赖的库的名字，但是还需要知道<strong>绝对路径</strong>。此时就需要系统的动态载入器来获取该绝对路径。对于<code>elf格式</code>的可执行程序，是由<code>ld-linux.so</code>来完成的，它先后搜索<code>elf文件</code>的 <code>DT_RPATH</code>段 =&gt; <code>环境变量LD_LIBRARY_PATH</code> =&gt; <code>/etc/ld.so.cache文件列表</code> =&gt; <code>/lib/</code>，<code>usr/lib</code>目录找到库文件后将其载入内存</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 1、修改环境变量，当前终端生效，退出当前终端失效</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">export</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> LD_LIBRARY_PATH</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$LD_LIBRARY_PATH</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">your</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">library</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">path</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 2、修改环境变量，用户级别永久配置</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/your/library/path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.zshrc</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 3、修改环境变量，系统级别永久配置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/profile</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">export</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> LD_LIBRARY_PATH</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$LD_LIBRARY_PATH</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">your</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">library</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">path</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">source</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/profile</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 4、修改 /etc/ld.so.conf 并更新缓存（系统级配置）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/ld.so.conf</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/your/library/path</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ldconfig</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-静态库和动态库的对比" tabindex="-1"><a class="header-anchor" href="#_4-静态库和动态库的对比"><span>（4）静态库和动态库的对比</span></a></h3><p><mark>程序编译成可执行程序的过程</mark></p><figure><img src="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331151700138.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250331152114802.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="makefile" tabindex="-1"><a class="header-anchor" href="#makefile"><span>Makefile</span></a></h2><h3 id="_1-简介" tabindex="-1"><a class="header-anchor" href="#_1-简介"><span>（1）简介</span></a></h3><ul><li>一个工程中的源文件不计其数，其按类型、功能、模块分别放在若干个目录中，<code>Makefile</code> 文件定义了一系列的规则来指定哪些文件需要先编译，哪些文件需要后编译，哪些文件需要重新编译，甚至于进行更复杂的功能操作，因为 <code>Makefile</code> 文件就像一个 <code>Shell</code> 脚本一样，也可以执行操作系统的命令</li><li><code>Makefile</code> 带来的好处就是“自动化编译” ，一旦写好，只需要一个 <code>make</code> 命令，整个工程完全自动编译，极大的提高了软件开发的效率，<code>make</code> 是一个命令工具，是一个解释 <code>Makefile</code> 文件中指令的命令工具。</li></ul><h3 id="_2-makefile文件命名和规则" tabindex="-1"><a class="header-anchor" href="#_2-makefile文件命名和规则"><span>（2）Makefile文件命名和规则</span></a></h3><ul><li><p>文件命名：<code>makefile</code> 或者 <code>Makefile</code></p></li><li><p><code>Makefile</code> 规则</p><ul><li><p>一个 <code>Makefile</code> 文件中可以有一个或者多个规则</p><ul><li><strong>目标</strong>：最终要生成的文件（伪目标除外）</li><li><strong>依赖</strong>：生成目标所需要的文件或是目标</li><li><strong>命令</strong>：通过执行命令对依赖操作生成目标（命令前必须 Tab 缩进）</li></ul></li><li><p><code>Makefile</code> 中的其它规则一般都是为第一条规则服务的。</p></li></ul></li></ul><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">目标</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ...</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 依赖</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	命令（Shell</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 命令</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">	...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-基本原理" tabindex="-1"><a class="header-anchor" href="#_3-基本原理"><span>（3）基本原理</span></a></h3><ul><li>命令在执行之前，需要先检查规则中的依赖是否存在 <ul><li>如果存在，执行命令</li><li>如果不存在，向下检查其它的规则，检查有没有一个规则是用来生成这个依赖的，如果找到了，则执行该规则中的命令</li></ul></li><li>检测更新，在执行规则中的命令时，会比较目标和依赖文件的时间 <ul><li>如果依赖的时间比目标的时间晚，需要重新生成目标</li><li>如果依赖的时间比目标的时间早，目标不需要更新，对应规则中的命令不需要被执行</li></ul></li></ul><h3 id="_4-makefile编写方式" tabindex="-1"><a class="header-anchor" href="#_4-makefile编写方式"><span>（4）Makefile编写方式</span></a></h3><p><code>add.c div.c head.h main.c mult.c sub.c</code></p><ul><li><p>直接编译链接</p><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">add.c div.c multi.c sub.c main.c</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">	gcc add.c div.c multi.c sub.c main.c -o app</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>编译+链接</p><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">add.o div.o multi.o sub.o main.o</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">	gcc add.o div.o multi.o sub.o main.o -o app</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">add.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">add.c</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">	gcc -c add.c -o add.o</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">div.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">div.c</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">	gcc -c div.c -o div.o</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">multi.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">multi.c</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">	gcc -c multi.c -o multi.o</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sub.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">sub.c</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">	gcc -c sub.c -o sub.o</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">main.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">main.c</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">	gcc -c main.c -o main.o</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>变量</p><ul><li><p>自定义变量：<code>变量名=变量值</code>，如<code>var=hello</code></p></li><li><p>预定义变量</p><ul><li><code>AR</code> : 归档维护程序的名称，默认值为 ar</li><li><code>CC </code>: C 编译器的名称，默认值为 cc</li><li><code>CXX</code> : C++ 编译器的名称，默认值为 g++</li><li><code>$@</code> : 目标的完整名称</li><li><code>$&lt;</code> : 第一个依赖文件的名称</li><li><code>$^</code>: 所有的依赖文件</li></ul></li><li><p>获取变量的值：<code>$(变量名)</code>，如<code>$(var)</code></p></li></ul><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">src</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">add.o div.o multi.o sub.o main.o</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">app</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">src</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> $^</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -o </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$@</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">add.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">add.c</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -c </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$^</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -o </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$@</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">div.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">div.c</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -c </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$^</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -o </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$@</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">multi.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">multi.c</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -c </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$^</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -o </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$@</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sub.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">sub.c</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -c </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$^</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -o </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$@</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">main.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">main.c</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -c </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$^</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -o </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$@</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>模式匹配：%.o:%.c</p><ul><li>%: 通配符，匹配一个字符串</li><li>两个%匹配的是同一个字符串</li></ul><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">src</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">add.o div.o multi.o sub.o main.o</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">app</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">src</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> $^</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -o </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$@</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.c</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -c </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -o </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$@</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>函数</p><ul><li><code>$(wildcard PATTERN...)</code><ul><li>功能：获取指定目录下指定类型的文件列表</li><li>参数：PATTERN 指的是某个或多个目录下的对应的某种类型的文件，如果有多个目录，一般使用空格间隔</li><li>返回：得到的若干个文件的文件列表，文件名之间使用空格间隔</li><li>示例：$(wildcard .c ./sub/.c),返回值格式: a.c b.c c.c d.c e.c f.c</li></ul></li><li><code>$(patsubst &lt;pattern&gt;,&lt;replacement&gt;,&lt;text&gt;)</code><ul><li>功能：查找<code>&lt;text&gt;</code>中的单词(单词以“空格”、“Tab”或“回车”“换行”分隔)是否符合模式<code>&lt;pattern&gt;</code>，如果匹配的话，则以<code>&lt;replacement&gt;</code>替换</li><li><code>&lt;pattern&gt;</code>可以包括通配符<code>%</code>，表示任意长度的字串。如果<code>&lt;replacement&gt;</code>中也包含<code>%</code>，那么，<code>&lt;replacement&gt;</code>中的这个<code>%</code>将是<code>&lt;pattern&gt;</code>中的那个%所代表的字串。(可以用<code>\</code>来转义，以<code>\%</code>来表示真实含义的<code>%</code>字符)</li><li>返回：函数返回被替换过后的字符串</li><li>示例：$(patsubst %.c, %.o, x.c bar.c),返回值格式: x.o bar.o</li></ul></li></ul><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">src</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">wildcard</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">objs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">patsubst</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> %</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> %</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> $(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">src</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">))</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">app</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">objs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> $^</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -o </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$@</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.c</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -c </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -o </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$@</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>清理中间件：make默认只能构建第一目标，clean是一个伪目标，通常用于手动清理，必须显示调用</p><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">src</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">wildcard</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">objs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">patsubst</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> %</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> %</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> $(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">src</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">))</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">app</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">objs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> $^</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -o </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$@</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">.o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.c</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">	$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -c </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -o </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">$@</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">clean</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">	rm *.o</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">	</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#这样 make 才会执行 clean 目标下的命令 rm *.o</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">make clean</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="gdb" tabindex="-1"><a class="header-anchor" href="#gdb"><span>GDB</span></a></h2><ul><li><p><code>GDB</code> 是由 GNU 软件系统社区提供的调试工具，同 <code>GCC</code> 配套组成了一套完整的开发环境，<code>GDB</code> 是 Linux 和许多类 Unix 系统中的标准开发环境</p></li><li><p>一般来说，<code>GDB</code> 主要帮助你完成下面四个方面的功能</p><ul><li>启动程序，可以按照自定义的要求随心所欲的运行程序</li><li>可让被调试的程序在所指定的调置的断点处停住（断点可以是条件表达式）</li><li>当程序被停住时，可以检查此时程序中所发生的事</li><li>可以改变程序，将一个 BUG 产生的影响修正从而测试其他 BUG</li></ul></li><li><p>通常，在为调试而编译时，我们会<strong>关掉编译器的优化选项</strong>（<code>-O</code>）， 并打开<strong>调试选项</strong>（<code>-g</code>）。另外，<code>-Wall</code>在尽量不影响程序行为的情况下选项打开所有warning，也可以发现许多问题，避免一些不必要的 BUG。<code>gcc -g -Wall program.c -o program</code></p></li><li><p><code>-g</code> 选项的作用是在可执行文件中加入源代码的信息，比如可执行文件中第几条机器指令对应源代码的第几行，但并不是把整个源文件嵌入到可执行文件中，所以在调试时必须保证 <code>gdb</code> 能找到源文件</p></li><li><p>注：当在 <code>gdb</code> 中直接使用<code>回车</code>时，会默认执行上一条命令</p></li></ul><figure><img src="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250403100536755.png" alt="image-20250403100536683" tabindex="0" loading="lazy"><figcaption>image-20250403100536683</figcaption></figure><h2 id="文件io" tabindex="-1"><a class="header-anchor" href="#文件io"><span>文件IO</span></a></h2><p>在<code>Linux</code>中使用<code>man 2 API名</code>查看<strong>Linux系统API</strong>，<code>man 3 API名</code>查看<strong>标准C库API</strong></p><h3 id="标准c库io函数" tabindex="-1"><a class="header-anchor" href="#标准c库io函数"><span>标准C库IO函数</span></a></h3><figure><img src="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250403102024401.png" alt="image-20250403102024319" tabindex="0" loading="lazy"><figcaption>image-20250403102024319</figcaption></figure><h3 id="标准-c-库-io-和-linux-系统-io-的关系" tabindex="-1"><a class="header-anchor" href="#标准-c-库-io-和-linux-系统-io-的关系"><span>标准 C 库 IO 和 Linux 系统 IO 的关系</span></a></h3><p>标准 C 库 I/O 函数最终会调用系统 I/O 函数；C 库 I/O 提供缓冲，减少系统调用次数，系统 I/O 是无缓冲的，每次调用都直接与内核交互。系统 I/O 使用文件描述符 (整数)；C 库 I/O 使用 FILE 指针 (结构体指针)</p><figure><img src="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250403102055887.png" alt="image-20250403102055811" tabindex="0" loading="lazy"><figcaption>image-20250403102055811</figcaption></figure><h3 id="虚拟地址空间" tabindex="-1"><a class="header-anchor" href="#虚拟地址空间"><span>虚拟地址空间</span></a></h3><ul><li><p>虚拟地址空间是为了解决内存加载问题</p><ul><li>问题1：假设实际内存为<code>4G</code>，此时共有<code>1G</code>、<code>2G</code>、<code>2G</code>三个程序，如果直接加载，那么第三个程序由于内存不足而无法执行</li><li>问题2：当问题1的<code>1G</code>程序执行完后，释放内存，第三个程序可以执行，但此时内存空间不连续</li></ul></li><li><p>对于32位机器来说，大小约为2<sup>32</sup>，即<code>4G</code>左右，对于64位机器来说，大小约为2<sup>48</sup>，即<code>256T</code>左右</p></li><li><p>通过<code>CPU中的MMU(内存管理单元)</code>将虚拟内存地址映射到物理内存地址上</p></li></ul><figure><img src="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250403102545619.png" alt="image-20250403102545539" tabindex="0" loading="lazy"><figcaption>image-20250403102545539</figcaption></figure><h3 id="文件描述符" tabindex="-1"><a class="header-anchor" href="#文件描述符"><span>文件描述符</span></a></h3><ul><li>文件描述符表是一个<strong>数组</strong>，为了一个进程能够同时操作多个文件</li><li>文件描述符表默认大小：1024</li></ul><figure><img src="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250403103046837.png" alt="image-20250403103046761" tabindex="0" loading="lazy"><figcaption>image-20250403103046761</figcaption></figure><h3 id="linux-系统-io-函数" tabindex="-1"><a class="header-anchor" href="#linux-系统-io-函数"><span>Linux 系统 IO 函数</span></a></h3><h4 id="open-close" tabindex="-1"><a class="header-anchor" href="#open-close"><span>open &amp; close</span></a></h4><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">fcntl.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> open</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> char</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">pathname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> flags</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ...</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    /* mode_t mode */</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> );</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">unistd.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> close</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> fd</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>参数 <ul><li>pathname：要打开/创建的文件的路径</li><li>flags：对文件的操作权限和其他的设置 <ul><li>必选项：O_RDONLY, O_WRONLY, O_RDWR 这三个之间是互斥的</li><li>可选项：O_CREAT 文件不存在，创建新文件</li><li>flags 参数是一个 int 类型的数据，占4个字节，32位，每一位就是一个标志位，所以用 <code>|</code> 可以保证能够实现多个操作</li></ul></li><li>mode：八进制的数，表示创建出的新的文件的操作权限，比如：0775(最终的权限是：<code>mode &amp; ~umask</code>，输入umask可查看umask的值，umask的作用就是抹去某些权限。按位与：0和任何数都为0)</li></ul></li><li>返回值：返回一个新的文件描述符，如果调用失败，返回 -1，并设置errno，errno属于Linux系统函数库里面的一个全局变量，记录的是最近的错误号( <code>#include &lt;stdio.h&gt; void perror(const char *s)</code>;作用：打印errno对应的错误描述;参数s：用户描述，比如hello, 最终输出的内容是hello:xxx(实际的错误描述))</li></ul><h4 id="read-write" tabindex="-1"><a class="header-anchor" href="#read-write"><span>read &amp; write</span></a></h4><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">unistd.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">ssize_t</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> read</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> fd</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> buf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">],</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> size_t</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>参数 <ul><li>fd：文件描述符，open得到的，通过这个文件描述符操作某个文件</li><li>buf：需要读取数据存放的地方，数组的地址（传出参数）</li><li>count：指定的数组的大小</li></ul></li><li>返回值 <ul><li>成功：大于0，返回实际的读取到的字节数；等于0，文件已经读取完了</li><li>失败：-1</li></ul></li></ul><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">unistd.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">ssize_t</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> write</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> fd</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> const</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> void</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> buf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">],</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> size_t</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>参数 <ul><li>fd：文件描述符，open得到的，通过这个文件描述符操作某个文件</li><li>buf：要往磁盘写入的数据</li><li>count：要写的数据的实际的大小</li></ul></li><li>返回值 <ul><li>成功：实际写入的字节数</li><li>失败：返回-1，并设置errno</li></ul></li></ul><h4 id="lseek" tabindex="-1"><a class="header-anchor" href="#lseek"><span>lseek</span></a></h4><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">unistd.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">off_t</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> lseek</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> fd</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> off_t</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> offset</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> whence</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>参数： <ul><li>fd：文件描述符，通过open得到的，通过这个fd操作某个文件</li><li>offset：偏移量</li><li>whence：SEEK_SET，设置文件指针的偏移量；SEEK_CUR，设置偏移量，当前位置 + 第二个参数offset的值；SEEK_END，设置偏移量，文件大小 + 第二个参数offset的值。</li></ul></li><li>返回值：返回文件指针的位置</li><li>作用： <ul><li>移动文件指针到文件头：lseek(fd, 0, SEEK_SET);</li><li>获取当前文件指针的位置：lseek(fd, 0, SEEK_CUR);</li><li>获取文件长度：lseek(fd, 0, SEEK_END);</li><li>拓展文件的长度，当前文件10b, 110b, 增加了100个字节：lseek(fd, 100, SEEK_END)[需要写一次数据]</li></ul></li></ul><h4 id="stat-lstat-获取文件信息及软链接信息" tabindex="-1"><a class="header-anchor" href="#stat-lstat-获取文件信息及软链接信息"><span>stat &amp; lstat(获取文件信息及软链接信息)</span></a></h4><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sys/stat.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> stat</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> char</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *restrict</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> pathname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">struct</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> stat </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*restrict</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> statbuf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> lstat</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> char</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *restrict</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> pathname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">struct</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> stat </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*restrict</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> statbuf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>作用：获取一个文件相关的一些信息</p></li><li><p>参数:</p><ul><li>pathname：操作的文件的路径</li><li>statbuf：结构体变量，传出参数，用于保存获取到的文件的信息</li></ul></li><li><p>返回值：成功返回0；失败返回-1并设置errno</p></li><li><p>区别：如果<code>/path/to/file</code>是一个指向<code>/real/file</code>的符号链接，<code>stat()</code>返回的是<code>/real/file</code>的信息，<code>lstat</code>返回的是<code>/path/to/file</code>的信息。</p></li><li><p>stat结构体</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">struct</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> stat </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    dev_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_dev</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 文件的设备编号</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    ino_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_ino</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 节点</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    mode_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_mode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 文件的类型和存取的权限</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    nlink_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_nlink</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 连到该文件的硬连接数目</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    uid_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_uid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 用户ID</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    gid_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_gid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 组ID</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    dev_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_rdev</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 设备文件的设备编号</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    off_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 文件字节数(文件大小)</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    blksize_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_blksize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 块大小</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    blkcnt_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_blocks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 块数</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    time_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_atime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 最后一次访问时间</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    time_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_mtime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 最后一次修改时间</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    time_t</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> st_ctime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 最后一次改变时间(指属性)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><ul><li><p>st_mode</p><figure><img src="https://xiaokcoding-image.oss-cn-beijing.aliyuncs.com/20250405151951669.png" alt="image-20250405151951576" tabindex="0" loading="lazy"><figcaption>image-20250405151951576</figcaption></figure></li></ul><h3 id="文件属性操作函数" tabindex="-1"><a class="header-anchor" href="#文件属性操作函数"><span>文件属性操作函数</span></a></h3><h4 id="access" tabindex="-1"><a class="header-anchor" href="#access"><span>access</span></a></h4><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">unistd.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> access</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> char</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">pathname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> mode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>作用：判断某个文件是否有某个权限，或者判断文件是否存在</li><li>参数： <ul><li>pathname: 判断的文件路径</li><li>mode: R_OK，判断是否有读权限； W_OK，判断是否有写权限；X_OK，判断是否有执行权限；F_OK，判断文件是否存在；</li></ul></li><li>返回值：成功返回0，失败返回-1</li></ul><h4 id="chmod-chown" tabindex="-1"><a class="header-anchor" href="#chmod-chown"><span>chmod &amp; chown</span></a></h4><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sys/stat.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> chmod</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> char</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">pathname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> mode_t</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> mode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>作用：修改文件的权限</li><li>参数： <ul><li>pathname: 需要修改的文件的路径</li><li>mode:需要修改的权限值，八进制的数</li></ul></li><li>返回值：成功返回0，失败返回-1</li></ul><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">unistd.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> chown</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> char</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">pathname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> uid_t</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> owner</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> gid_t</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> group</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>修改文件所有者</li><li>可使用<code>vim /etc/passwd</code>查看有哪些用户</li><li>可使用<code>vim /etc/group</code>查看有哪些组</li></ul><h4 id="truncate" tabindex="-1"><a class="header-anchor" href="#truncate"><span>truncate</span></a></h4><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">unistd.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> truncate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> char</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> off_t</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> length</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>作用：缩减或者扩展文件的尺寸至指定的大小</li><li>参数： <ul><li>path: 需要修改的文件的路径</li><li>length: 需要最终文件变成的大小</li></ul></li><li>返回值：成功返回0，失败返回-1</li></ul></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-c519daa1 data-v-2e90308b><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-2e90308b><span class="contributors-label" data-v-2e90308b>贡献者: </span><span class="contributors-info" data-v-2e90308b><!--[--><!--[--><span class="contributor" data-v-2e90308b>xiaokcoding</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-2e90308b><div class="pager" data-v-2e90308b><a class="vp-link no-icon link pager-link prev" href="/Liunx/un3ef18p/" data-v-2e90308b data-v-37973cd5><!--[--><span class="desc" data-v-2e90308b>上一页</span><span class="title" data-v-2e90308b>Liunx基础命令</span><!--]--><!----></a></div><div class="pager" data-v-2e90308b><a class="vp-link no-icon link pager-link next" href="/Liunx/d4q4z9fd/" data-v-2e90308b data-v-37973cd5><!--[--><span class="desc" data-v-2e90308b>下一页</span><span class="title" data-v-2e90308b>Linux多进程开发</span><!--]--><!----></a></div></nav></footer><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;" data-v-c519daa1><div style="display: flex;
align-items: center;
justify-content: center;
height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);
--icon-size: 48px;
display: inline-block;
width: var(--icon-size);
height: var(--icon-size);
background-color: currentcolor;
-webkit-mask-image: var(--loading-icon);
mask-image: var(--loading-icon);
"></span></div></div><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-5361e2b5 data-v-25c02618><span class="percent" data-allow-mismatch data-v-25c02618>0%</span><span class="show icon vpi-back-to-top" data-v-25c02618></span><svg aria-hidden="true" data-v-25c02618><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-25c02618></circle></svg></button><footer class="vp-footer has-sidebar" vp-footer data-v-5361e2b5 data-v-91758a7c><!--[--><div class="container" data-v-91758a7c><p class="message" data-v-91758a7c>Powered by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><!----></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-gdwmcdjK.js" defer></script></body></html>